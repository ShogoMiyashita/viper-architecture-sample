# viper-architecture-sample

本リポジトリはVIPERアーキテクチャ及びUnitTestの学習用のサンプルである。

VIPERの基本構成については下記の通り。

<img width="576" alt="スクリーンショット 2024-07-27 18 23 58" src="https://github.com/user-attachments/assets/8005f7bc-c4d1-46ad-aa6f-25508af95e14">

## 基本仕様

### アプリ概要
このアプリは、PokeAPIを使ってポケモンの一覧を表示する。初回表示で50件のポケモンを表示し、スクロールすることで追加で20件ずつ読み込む。
各ポケモンには名前、画像、お気に入りボタンを表示し、お気に入り登録が可能。タブバーには「一覧」と「お気に入り」の二つのタブがあり、お気に入りに登録したポケモンは「お気に入り」タブに表示される。
お気に入り情報はローカルにキャッシュされ、アプリ再起動後も保持される。

### 機能要件
#### 1.ポケモン一覧リスト
初回表示: APIからポケモンの一覧を50件取得し、画面に表示する。

スクロールでの追加読み込み: ユーザーがスクロールすることで、追加で20件ずつポケモンを読み込み、リストを更新する。

各セルには以下を表示する：
- ポケモンの名前
- ポケモンの画像
- お気に入りボタン

お気に入りボタンを押下時、そのポケモンをお気に入りに登録する。
登録したポケモンは「お気に入り」タブに表示されるリストに追加される。

#### 2. お気に入りポケモンリスト
お気に入りに登録したポケモンの一覧を表示する
お気に入りに登録したポケモンはローカルにキャッシュし、アプリ再起動後も保持される。

### 技術仕様
初回リクエスト: https://pokeapi.co/api/v2/pokemon?limit=50
追加リクエスト: https://pokeapi.co/api/v2/pokemon?offset={offset}&limit=20（offsetは前回の最後のポケモンのインデックス）

ユーザーがタブバーを使用して「一覧」タブと「お気に入り」タブを切り替え、各タブに対応する情報を表示する。
### エラーハンドリング
- ネットワークエラーやAPIの障害が発生した場合、「インターネットの接続に失敗しました。時間をおいて再度お試しください。」エラーメッセージを表示し、再試行を行う
- ローカルキャッシュからのデータ読み込みに失敗した場合は何も表示しない。

## 使用ライブラリ
- Alamofire: API通信に利用
- ProgressHUD: 通信中のローディングに利用
- SwiftLint: 静的解析ツール。基本的な文法やコーディング規約のチェックに使用。
